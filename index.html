<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>4ëŒ€ë³´í—˜ëšë”± ğŸ’¼</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  :root {
    --primary: #2563eb;
    --primary-dark: #1d4ed8;
    --bg: #f8fafc;
    --surface: #ffffff;
    --text: #1e293b;
    --text-dim: #64748b;
    --border: #e2e8f0;
    --success: #10b981;
    --warning: #f59e0b;
    --danger: #ef4444;
    --info: #0ea5e9;
  }
  body { font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; }

  /* Header */
  .header { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; padding: 24px 20px; text-align: center; }
  .header h1 { font-size: 24px; font-weight: 700; margin-bottom: 4px; }
  .header p { font-size: 14px; opacity: 0.9; }

  /* Container */
  .container { max-width: 800px; margin: 0 auto; padding: 20px; }

  /* Tabs */
  .tabs { display: flex; background: var(--surface); border-radius: 12px; padding: 4px; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
  .tab { flex: 1; padding: 12px; text-align: center; font-size: 14px; font-weight: 600; border-radius: 8px; cursor: pointer; color: var(--text-dim); transition: all 0.2s; border: none; background: none; }
  .tab.active { background: var(--primary); color: white; }

  /* Cards */
  .card { background: var(--surface); border-radius: 16px; padding: 24px; margin-bottom: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); }
  .card-title { font-size: 16px; font-weight: 700; margin-bottom: 16px; display: flex; align-items: center; gap: 8px; }
  .card-title .icon { font-size: 20px; }

  /* Form */
  .form-group { margin-bottom: 16px; }
  .form-group label { display: block; font-size: 13px; font-weight: 600; color: var(--text-dim); margin-bottom: 6px; }
  .form-group input, .form-group select {
    width: 100%; padding: 12px 14px; border: 1px solid var(--border); border-radius: 10px;
    font-size: 15px; transition: border 0.2s; background: var(--bg);
  }
  .form-group input:focus, .form-group select:focus { outline: none; border-color: var(--primary); }
  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
  .form-hint { font-size: 12px; color: var(--text-dim); margin-top: 4px; }

  /* Button */
  .btn { width: 100%; padding: 14px; border-radius: 10px; border: none; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
  .btn-primary { background: var(--primary); color: white; }
  .btn-primary:hover { background: var(--primary-dark); }
  .btn-secondary { background: var(--bg); color: var(--text); border: 1px solid var(--border); }
  .btn-sm { padding: 8px 16px; font-size: 13px; width: auto; }

  /* Results */
  .result-section { margin-top: 24px; }
  .result-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
  .result-header h2 { font-size: 18px; font-weight: 700; }
  .result-total { font-size: 14px; color: var(--text-dim); }
  .result-total strong { font-size: 20px; color: var(--primary); }

  .result-table { width: 100%; border-collapse: collapse; }
  .result-table th, .result-table td { padding: 12px; text-align: left; border-bottom: 1px solid var(--border); font-size: 14px; }
  .result-table th { font-weight: 600; color: var(--text-dim); font-size: 12px; text-transform: uppercase; }
  .result-table tr:last-child td { border-bottom: none; }
  .result-table .amount { text-align: right; font-weight: 600; font-variant-numeric: tabular-nums; }
  .result-table .total-row { background: var(--bg); font-weight: 700; }
  .result-table .total-row td { border-top: 2px solid var(--border); }

  /* Summary boxes */
  .summary-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 20px; }
  .summary-box { background: var(--bg); border-radius: 12px; padding: 16px; text-align: center; }
  .summary-box .label { font-size: 12px; color: var(--text-dim); margin-bottom: 4px; }
  .summary-box .value { font-size: 20px; font-weight: 700; color: var(--primary); }
  .summary-box.employer { border-left: 4px solid var(--info); }
  .summary-box.employee { border-left: 4px solid var(--success); }

  /* Rate settings */
  .rate-grid { display: grid; gap: 12px; }
  .rate-item { display: grid; grid-template-columns: 1fr 100px 100px; gap: 8px; align-items: center; padding: 12px; background: var(--bg); border-radius: 8px; }
  .rate-item .name { font-size: 14px; font-weight: 500; }
  .rate-item input { padding: 8px; text-align: center; font-size: 13px; }

  /* Dururi section */
  .dururi-check { background: linear-gradient(135deg, #fef3c7, #fde68a); border-radius: 12px; padding: 16px; margin-bottom: 16px; }
  .dururi-check h3 { font-size: 14px; font-weight: 600; color: #92400e; margin-bottom: 8px; }
  .dururi-check p { font-size: 13px; color: #a16207; }
  .dururi-eligible { background: linear-gradient(135deg, #d1fae5, #a7f3d0); }
  .dururi-eligible h3 { color: #065f46; }
  .dururi-eligible p { color: #047857; }

  /* Notice */
  .notice { background: #fef9c3; border-left: 4px solid var(--warning); padding: 12px 16px; border-radius: 0 8px 8px 0; margin-bottom: 16px; font-size: 13px; color: #854d0e; }

  /* Industry select */
  .industry-rates { max-height: 300px; overflow-y: auto; margin-top: 12px; }
  .industry-item { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid var(--border); font-size: 13px; cursor: pointer; transition: background 0.2s; }
  .industry-item:hover { background: var(--bg); }
  .industry-item.selected { background: #dbeafe; }

  /* Print */
  .print-btn { margin-top: 16px; }
  @media print {
    .no-print { display: none !important; }
    .card { box-shadow: none; border: 1px solid #ddd; }
  }

  /* Responsive */
  @media (max-width: 600px) {
    .form-row { grid-template-columns: 1fr; }
    .summary-grid { grid-template-columns: 1fr; }
    .rate-item { grid-template-columns: 1fr; gap: 4px; }
    .rate-item input { width: 100%; }
  }
</style>
</head>
<body>

<div class="header">
  <h1>ğŸ’¼ 4ëŒ€ë³´í—˜ëšë”±</h1>
  <p>ì†Œìƒê³µì¸ì„ ìœ„í•œ 4ëŒ€ë³´í—˜ë£Œ ê³„ì‚°ê¸°</p>
</div>

<div class="container">
  <!-- Notice -->
  <div class="notice no-print">
    âš ï¸ <strong>ì£¼ì˜:</strong> ë³¸ ê³„ì‚°ê¸°ì˜ ìš”ìœ¨ì€ ì°¸ê³ ìš©ì…ë‹ˆë‹¤. ì •í™•í•œ ìš”ìœ¨ì€ <a href="https://www.4insure.or.kr" target="_blank">4ëŒ€ì‚¬íšŒë³´í—˜ ì •ë³´ì—°ê³„ì„¼í„°</a>ì—ì„œ í™•ì¸í•˜ì„¸ìš”.
  </div>

  <!-- Tabs -->
  <div class="tabs no-print">
    <button class="tab active" onclick="switchTab('calc')">ë³´í—˜ë£Œ ê³„ì‚°</button>
    <button class="tab" onclick="switchTab('dururi')">ë‘ë£¨ëˆ„ë¦¬ í™•ì¸</button>
    <button class="tab" onclick="switchTab('settings')">ìš”ìœ¨ ì„¤ì •</button>
  </div>

  <!-- Calculator Tab -->
  <div id="tab-calc">
    <div class="card">
      <div class="card-title"><span class="icon">ğŸ‘¤</span> ê·¼ë¡œì ì •ë³´</div>
      
      <div class="form-row">
        <div class="form-group">
          <label>ì›” ê¸‰ì—¬ (ì›)</label>
          <input type="text" id="salary" placeholder="3,000,000" oninput="formatNumber(this); calculate()">
        </div>
        <div class="form-group">
          <label>ì‚¬ì—…ì¥ ê·œëª¨</label>
          <select id="companySize" onchange="calculate()">
            <option value="under10">10ì¸ ë¯¸ë§Œ</option>
            <option value="under50">10ì¸ ì´ìƒ 50ì¸ ë¯¸ë§Œ</option>
            <option value="under150">50ì¸ ì´ìƒ 150ì¸ ë¯¸ë§Œ</option>
            <option value="under1000">150ì¸ ì´ìƒ 1000ì¸ ë¯¸ë§Œ</option>
            <option value="over1000">1000ì¸ ì´ìƒ</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>ì—…ì¢… (ì‚°ì¬ë³´í—˜)</label>
          <select id="industry" onchange="calculate()">
            <option value="1.10">ì‚¬ë¬´ì§ (1.10%)</option>
            <option value="0.70">ê¸ˆìœµÂ·ë³´í—˜ì—… (0.70%)</option>
            <option value="0.90">ë„ì†Œë§¤Â·ìŒì‹ìˆ™ë°•ì—… (0.90%)</option>
            <option value="1.40">ì œì¡°ì—…-ì¼ë°˜ (1.40%)</option>
            <option value="1.80">ê±´ì„¤ì—…-ì¼ë°˜ (1.80%)</option>
            <option value="2.20">ìš´ìˆ˜ì—… (2.20%)</option>
            <option value="0.80">êµìœ¡ì„œë¹„ìŠ¤ì—… (0.80%)</option>
            <option value="1.00">ë³´ê±´Â·ì‚¬íšŒë³µì§€ (1.00%)</option>
          </select>
        </div>
        <div class="form-group">
          <label>ê·¼ë¡œì ìœ í˜•</label>
          <select id="workerType" onchange="calculate()">
            <option value="regular">ì •ê·œì§</option>
            <option value="daily">ì¼ìš©ì§</option>
          </select>
        </div>
      </div>

      <button class="btn btn-primary" onclick="calculate()">ê³„ì‚°í•˜ê¸°</button>
    </div>

    <!-- Results -->
    <div id="results" style="display: none;">
      <div class="card result-section">
        <div class="result-header">
          <h2>ğŸ“Š ê³„ì‚° ê²°ê³¼</h2>
        </div>

        <div class="summary-grid">
          <div class="summary-box employer">
            <div class="label">ì‚¬ì—…ì£¼ ë¶€ë‹´</div>
            <div class="value" id="totalEmployer">0ì›</div>
          </div>
          <div class="summary-box employee">
            <div class="label">ê·¼ë¡œì ë¶€ë‹´</div>
            <div class="value" id="totalEmployee">0ì›</div>
          </div>
        </div>

        <table class="result-table">
          <thead>
            <tr>
              <th>í•­ëª©</th>
              <th class="amount">ì‚¬ì—…ì£¼</th>
              <th class="amount">ê·¼ë¡œì</th>
            </tr>
          </thead>
          <tbody id="resultBody">
          </tbody>
          <tfoot>
            <tr class="total-row">
              <td><strong>í•©ê³„</strong></td>
              <td class="amount" id="footerEmployer">0ì›</td>
              <td class="amount" id="footerEmployee">0ì›</td>
            </tr>
          </tfoot>
        </table>
      </div>

      <!-- Additional Info -->
      <div class="card">
        <div class="card-title"><span class="icon">ğŸ’¡</span> ì°¸ê³  ì •ë³´</div>
        <div id="additionalInfo" style="font-size: 14px; color: var(--text-dim);"></div>
      </div>

      <button class="btn btn-secondary print-btn no-print" onclick="window.print()">ğŸ–¨ï¸ ì¸ì‡„í•˜ê¸°</button>
    </div>
  </div>

  <!-- Dururi Tab -->
  <div id="tab-dururi" style="display: none;">
    <div class="card">
      <div class="card-title"><span class="icon">ğŸŒˆ</span> ë‘ë£¨ëˆ„ë¦¬ ì§€ì›ê¸ˆ í™•ì¸</div>
      <p style="font-size: 14px; color: var(--text-dim); margin-bottom: 16px;">
        ë‘ë£¨ëˆ„ë¦¬ ì‚¬íšŒë³´í—˜ë£Œ ì§€ì›ì‚¬ì—…ì€ ì†Œê·œëª¨ ì‚¬ì—…ì¥ì˜ ì‚¬ì—…ì£¼ì™€ ê·¼ë¡œìì˜ ì‚¬íšŒë³´í—˜ë£Œ ì¼ë¶€ë¥¼ êµ­ê°€ì—ì„œ ì§€ì›í•˜ëŠ” ì œë„ì…ë‹ˆë‹¤.
      </p>

      <div class="form-row">
        <div class="form-group">
          <label>ê·¼ë¡œì ìˆ˜</label>
          <input type="number" id="dururiWorkers" placeholder="5" value="5">
        </div>
        <div class="form-group">
          <label>ê·¼ë¡œì ì›” ê¸‰ì—¬ (ì›)</label>
          <input type="text" id="dururiSalary" placeholder="2,700,000" oninput="formatNumber(this)">
        </div>
      </div>

      <div class="form-group">
        <label>ì‹ ê·œê°€ì… ì—¬ë¶€</label>
        <select id="dururiNew">
          <option value="new">ì‹ ê·œê°€ì… (6ê°œì›” ì´ìƒ ë¯¸ê°€ì…)</option>
          <option value="existing">ê¸°ì¡´ê°€ì…ì</option>
        </select>
      </div>

      <button class="btn btn-primary" onclick="checkDururi()">ì§€ì› ëŒ€ìƒ í™•ì¸</button>

      <div id="dururiResult" style="margin-top: 16px;"></div>
    </div>

    <div class="card">
      <div class="card-title"><span class="icon">ğŸ“‹</span> ë‘ë£¨ëˆ„ë¦¬ ì§€ì› ì¡°ê±´</div>
      <ul style="font-size: 14px; color: var(--text-dim); padding-left: 20px;">
        <li style="margin-bottom: 8px;"><strong>ì‚¬ì—…ì¥ ê·œëª¨:</strong> ê·¼ë¡œì 10ì¸ ë¯¸ë§Œ</li>
        <li style="margin-bottom: 8px;"><strong>ê·¼ë¡œì ìš”ê±´:</strong> ì›”í‰ê·  ë³´ìˆ˜ 270ë§Œì› ë¯¸ë§Œ</li>
        <li style="margin-bottom: 8px;"><strong>ì§€ì› ë‚´ìš©:</strong> êµ­ë¯¼ì—°ê¸ˆÂ·ê³ ìš©ë³´í—˜ë£Œì˜ 80% ì§€ì› (ì‹ ê·œê°€ì…ì)</li>
        <li style="margin-bottom: 8px;"><strong>ì§€ì› ê¸°ê°„:</strong> ìµœëŒ€ 36ê°œì›”</li>
      </ul>
    </div>
  </div>

  <!-- Settings Tab -->
  <div id="tab-settings" style="display: none;">
    <div class="card">
      <div class="card-title"><span class="icon">âš™ï¸</span> 2026ë…„ 4ëŒ€ë³´í—˜ ìš”ìœ¨ ì„¤ì •</div>
      <p style="font-size: 13px; color: var(--text-dim); margin-bottom: 16px;">
        ì•„ë˜ ìš”ìœ¨ì„ ê³µì‹ ìë£Œì— ë§ê²Œ ìˆ˜ì •í•˜ì„¸ìš”. ìˆ˜ì • í›„ "ì €ì¥" ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë¡œì»¬ì— ì €ì¥ë©ë‹ˆë‹¤.
      </p>

      <div class="rate-grid">
        <div class="rate-item">
          <span class="name">êµ­ë¯¼ì—°ê¸ˆ</span>
          <input type="text" id="rate_pension_employer" value="4.5" placeholder="ì‚¬ì—…ì£¼ %">
          <input type="text" id="rate_pension_employee" value="4.5" placeholder="ê·¼ë¡œì %">
        </div>
        <div class="rate-item">
          <span class="name">ê±´ê°•ë³´í—˜</span>
          <input type="text" id="rate_health_employer" value="3.545" placeholder="ì‚¬ì—…ì£¼ %">
          <input type="text" id="rate_health_employee" value="3.545" placeholder="ê·¼ë¡œì %">
        </div>
        <div class="rate-item">
          <span class="name">ì¥ê¸°ìš”ì–‘ë³´í—˜ (ê±´ë³´ë£Œì˜ %)</span>
          <input type="text" id="rate_longterm" value="12.95" placeholder="ìš”ìœ¨ %">
          <span style="font-size: 12px; color: var(--text-dim);">ì‚¬ì—…ì£¼/ê·¼ë¡œì 50:50</span>
        </div>
        <div class="rate-item">
          <span class="name">ê³ ìš©ë³´í—˜ (ì‹¤ì—…ê¸‰ì—¬)</span>
          <input type="text" id="rate_employ_employer" value="0.9" placeholder="ì‚¬ì—…ì£¼ %">
          <input type="text" id="rate_employ_employee" value="0.9" placeholder="ê·¼ë¡œì %">
        </div>
      </div>

      <div style="margin-top: 16px;">
        <div class="card-title" style="font-size: 14px;"><span class="icon">ğŸ¢</span> ê³ ìš©ì•ˆì •Â·ì§ì—…ëŠ¥ë ¥ê°œë°œ (ì‚¬ì—…ì£¼ë§Œ ë¶€ë‹´)</div>
        <div class="rate-grid">
          <div class="rate-item">
            <span class="name">150ì¸ ë¯¸ë§Œ</span>
            <input type="text" id="rate_dev_under150" value="0.25" placeholder="%">
            <span></span>
          </div>
          <div class="rate-item">
            <span class="name">150ì¸ ì´ìƒ (ìš°ì„ ì§€ì›)</span>
            <input type="text" id="rate_dev_150priority" value="0.45" placeholder="%">
            <span></span>
          </div>
          <div class="rate-item">
            <span class="name">150~1000ì¸ ë¯¸ë§Œ</span>
            <input type="text" id="rate_dev_under1000" value="0.65" placeholder="%">
            <span></span>
          </div>
          <div class="rate-item">
            <span class="name">1000ì¸ ì´ìƒ</span>
            <input type="text" id="rate_dev_over1000" value="0.85" placeholder="%">
            <span></span>
          </div>
        </div>
      </div>

      <div style="margin-top: 20px; display: flex; gap: 8px;">
        <button class="btn btn-primary" onclick="saveRates()">ğŸ’¾ ì €ì¥</button>
        <button class="btn btn-secondary" onclick="resetRates()">â†©ï¸ ê¸°ë³¸ê°’ ë³µì›</button>
      </div>

      <div style="margin-top: 16px; padding: 12px; background: var(--bg); border-radius: 8px; font-size: 12px; color: var(--text-dim);">
        <strong>ğŸ“Œ ê³µì‹ ì¶œì²˜:</strong><br>
        â€¢ êµ­ë¯¼ì—°ê¸ˆ: <a href="https://www.nps.or.kr" target="_blank">êµ­ë¯¼ì—°ê¸ˆê³µë‹¨</a><br>
        â€¢ ê±´ê°•ë³´í—˜: <a href="https://www.nhis.or.kr" target="_blank">êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨</a><br>
        â€¢ ê³ ìš©ë³´í—˜: <a href="https://www.ei.go.kr" target="_blank">ê³ ìš©ë³´í—˜</a><br>
        â€¢ ì‚°ì¬ë³´í—˜: <a href="https://www.kcomwel.or.kr" target="_blank">ê·¼ë¡œë³µì§€ê³µë‹¨</a><br>
        â€¢ í†µí•©: <a href="https://www.4insure.or.kr" target="_blank">4ëŒ€ì‚¬íšŒë³´í—˜ ì •ë³´ì—°ê³„ì„¼í„°</a>
      </div>
    </div>
  </div>
</div>

<script>
// Default rates (2026 estimated)
const defaultRates = {
  pension: { employer: 4.5, employee: 4.5 },
  health: { employer: 3.545, employee: 3.545 },
  longterm: 12.95,
  employ: { employer: 0.9, employee: 0.9 },
  dev: {
    under150: 0.25,
    priority150: 0.45,
    under1000: 0.65,
    over1000: 0.85
  }
};

let rates = JSON.parse(JSON.stringify(defaultRates));

// Load saved rates
function loadRates() {
  const saved = localStorage.getItem('4insure_rates');
  if (saved) {
    rates = JSON.parse(saved);
    // Update form
    document.getElementById('rate_pension_employer').value = rates.pension.employer;
    document.getElementById('rate_pension_employee').value = rates.pension.employee;
    document.getElementById('rate_health_employer').value = rates.health.employer;
    document.getElementById('rate_health_employee').value = rates.health.employee;
    document.getElementById('rate_longterm').value = rates.longterm;
    document.getElementById('rate_employ_employer').value = rates.employ.employer;
    document.getElementById('rate_employ_employee').value = rates.employ.employee;
    document.getElementById('rate_dev_under150').value = rates.dev.under150;
    document.getElementById('rate_dev_150priority').value = rates.dev.priority150;
    document.getElementById('rate_dev_under1000').value = rates.dev.under1000;
    document.getElementById('rate_dev_over1000').value = rates.dev.over1000;
  }
}

function saveRates() {
  rates.pension.employer = parseFloat(document.getElementById('rate_pension_employer').value) || 4.5;
  rates.pension.employee = parseFloat(document.getElementById('rate_pension_employee').value) || 4.5;
  rates.health.employer = parseFloat(document.getElementById('rate_health_employer').value) || 3.545;
  rates.health.employee = parseFloat(document.getElementById('rate_health_employee').value) || 3.545;
  rates.longterm = parseFloat(document.getElementById('rate_longterm').value) || 12.95;
  rates.employ.employer = parseFloat(document.getElementById('rate_employ_employer').value) || 0.9;
  rates.employ.employee = parseFloat(document.getElementById('rate_employ_employee').value) || 0.9;
  rates.dev.under150 = parseFloat(document.getElementById('rate_dev_under150').value) || 0.25;
  rates.dev.priority150 = parseFloat(document.getElementById('rate_dev_150priority').value) || 0.45;
  rates.dev.under1000 = parseFloat(document.getElementById('rate_dev_under1000').value) || 0.65;
  rates.dev.over1000 = parseFloat(document.getElementById('rate_dev_over1000').value) || 0.85;

  localStorage.setItem('4insure_rates', JSON.stringify(rates));
  alert('ìš”ìœ¨ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
}

function resetRates() {
  if (confirm('ê¸°ë³¸ê°’ìœ¼ë¡œ ë³µì›í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
    rates = JSON.parse(JSON.stringify(defaultRates));
    localStorage.removeItem('4insure_rates');
    loadRates();
    location.reload();
  }
}

// Tab switching
function switchTab(tab) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  event.target.classList.add('active');
  document.getElementById('tab-calc').style.display = tab === 'calc' ? '' : 'none';
  document.getElementById('tab-dururi').style.display = tab === 'dururi' ? '' : 'none';
  document.getElementById('tab-settings').style.display = tab === 'settings' ? '' : 'none';
}

// Format number with commas
function formatNumber(input) {
  let value = input.value.replace(/[^\d]/g, '');
  input.value = value.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}

function parseNumber(str) {
  return parseInt(str.replace(/[^\d]/g, '')) || 0;
}

function formatCurrency(num) {
  return Math.round(num).toLocaleString('ko-KR') + 'ì›';
}

// Get dev rate based on company size
function getDevRate(size) {
  switch(size) {
    case 'under10':
    case 'under50':
    case 'under150': return rates.dev.under150;
    case 'under1000': return rates.dev.under1000;
    case 'over1000': return rates.dev.over1000;
    default: return rates.dev.under150;
  }
}

// Calculate
function calculate() {
  const salary = parseNumber(document.getElementById('salary').value);
  if (!salary) return;

  const companySize = document.getElementById('companySize').value;
  const industryRate = parseFloat(document.getElementById('industry').value);
  const workerType = document.getElementById('workerType').value;

  // êµ­ë¯¼ì—°ê¸ˆ ìƒí•˜í•œ
  const pensionMax = 6170000; // 2026 ì˜ˆìƒ ìƒí•œ
  const pensionMin = 390000;  // í•˜í•œ
  const pensionBase = Math.max(pensionMin, Math.min(salary, pensionMax));

  // ê±´ê°•ë³´í—˜ ìƒí•œ (ë³´ìˆ˜ì›”ì•¡ ìƒí•œ)
  const healthMax = 119625000; // ì›” ìƒí•œ
  const healthBase = Math.min(salary, healthMax);

  // ê³„ì‚°
  const pension_employer = pensionBase * (rates.pension.employer / 100);
  const pension_employee = pensionBase * (rates.pension.employee / 100);

  const health_employer = healthBase * (rates.health.employer / 100);
  const health_employee = healthBase * (rates.health.employee / 100);

  const longterm_employer = health_employer * (rates.longterm / 100);
  const longterm_employee = health_employee * (rates.longterm / 100);

  const employ_employer = salary * (rates.employ.employer / 100);
  const employ_employee = salary * (rates.employ.employee / 100);

  const devRate = getDevRate(companySize);
  const dev_employer = salary * (devRate / 100);

  const accident_employer = salary * (industryRate / 100);

  // í•©ê³„
  const totalEmployer = pension_employer + health_employer + longterm_employer + employ_employer + dev_employer + accident_employer;
  const totalEmployee = pension_employee + health_employee + longterm_employee + employ_employee;

  // Display
  document.getElementById('results').style.display = '';
  document.getElementById('totalEmployer').textContent = formatCurrency(totalEmployer);
  document.getElementById('totalEmployee').textContent = formatCurrency(totalEmployee);
  document.getElementById('footerEmployer').textContent = formatCurrency(totalEmployer);
  document.getElementById('footerEmployee').textContent = formatCurrency(totalEmployee);

  const tbody = document.getElementById('resultBody');
  tbody.innerHTML = `
    <tr>
      <td>êµ­ë¯¼ì—°ê¸ˆ</td>
      <td class="amount">${formatCurrency(pension_employer)}</td>
      <td class="amount">${formatCurrency(pension_employee)}</td>
    </tr>
    <tr>
      <td>ê±´ê°•ë³´í—˜</td>
      <td class="amount">${formatCurrency(health_employer)}</td>
      <td class="amount">${formatCurrency(health_employee)}</td>
    </tr>
    <tr>
      <td>ì¥ê¸°ìš”ì–‘ë³´í—˜</td>
      <td class="amount">${formatCurrency(longterm_employer)}</td>
      <td class="amount">${formatCurrency(longterm_employee)}</td>
    </tr>
    <tr>
      <td>ê³ ìš©ë³´í—˜ (ì‹¤ì—…ê¸‰ì—¬)</td>
      <td class="amount">${formatCurrency(employ_employer)}</td>
      <td class="amount">${formatCurrency(employ_employee)}</td>
    </tr>
    <tr>
      <td>ê³ ìš©ë³´í—˜ (ê³ ìš©ì•ˆì •Â·ì§ëŠ¥ê°œë°œ)</td>
      <td class="amount">${formatCurrency(dev_employer)}</td>
      <td class="amount">-</td>
    </tr>
    <tr>
      <td>ì‚°ì¬ë³´í—˜</td>
      <td class="amount">${formatCurrency(accident_employer)}</td>
      <td class="amount">-</td>
    </tr>
  `;

  // Additional info
  const info = document.getElementById('additionalInfo');
  const monthlyTotal = totalEmployer + totalEmployee;
  const yearlyTotal = monthlyTotal * 12;
  const employerYearly = totalEmployer * 12;

  info.innerHTML = `
    <p>â€¢ <strong>ì›” ì´ 4ëŒ€ë³´í—˜ë£Œ:</strong> ${formatCurrency(monthlyTotal)}</p>
    <p>â€¢ <strong>ì—°ê°„ ì´ 4ëŒ€ë³´í—˜ë£Œ:</strong> ${formatCurrency(yearlyTotal)}</p>
    <p>â€¢ <strong>ì‚¬ì—…ì£¼ ì—°ê°„ ë¶€ë‹´:</strong> ${formatCurrency(employerYearly)}</p>
    <p style="margin-top: 8px;">â€¢ êµ­ë¯¼ì—°ê¸ˆ ê¸°ì¤€ì†Œë“ì›”ì•¡: ${formatCurrency(pensionBase)}</p>
    ${salary > pensionMax ? `<p style="color: var(--warning);">âš ï¸ êµ­ë¯¼ì—°ê¸ˆ ìƒí•œ(${formatCurrency(pensionMax)}) ì ìš©ë¨</p>` : ''}
  `;
}

// Dururi check
function checkDururi() {
  const workers = parseInt(document.getElementById('dururiWorkers').value) || 0;
  const salary = parseNumber(document.getElementById('dururiSalary').value);
  const isNew = document.getElementById('dururiNew').value === 'new';

  const resultDiv = document.getElementById('dururiResult');

  const eligible = workers < 10 && salary < 2700000;

  if (eligible) {
    const pensionAmount = salary * (rates.pension.employer / 100);
    const employAmount = salary * (rates.employ.employer / 100);
    const totalSupport = (pensionAmount + employAmount) * 2; // ì‚¬ì—…ì£¼+ê·¼ë¡œì

    const supportRate = isNew ? 80 : 0;
    const supportAmount = totalSupport * (supportRate / 100);

    resultDiv.innerHTML = `
      <div class="dururi-check dururi-eligible">
        <h3>âœ… ë‘ë£¨ëˆ„ë¦¬ ì§€ì› ëŒ€ìƒì…ë‹ˆë‹¤!</h3>
        <p>
          ${isNew ? 'ì‹ ê·œê°€ì…ìë¡œ <strong>80% ì§€ì›</strong>ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.' : 'ê¸°ì¡´ê°€ì…ìëŠ” ì§€ì› ëŒ€ìƒì´ ì•„ë‹™ë‹ˆë‹¤.'}<br>
          ${isNew ? `ì˜ˆìƒ ì›” ì§€ì›ê¸ˆ: <strong>${formatCurrency(supportAmount)}</strong> (ì‚¬ì—…ì£¼+ê·¼ë¡œì)` : ''}
        </p>
      </div>
    `;
  } else {
    let reason = '';
    if (workers >= 10) reason = 'ê·¼ë¡œì ìˆ˜ê°€ 10ì¸ ì´ìƒì…ë‹ˆë‹¤.';
    else if (salary >= 2700000) reason = 'ì›” ê¸‰ì—¬ê°€ 270ë§Œì› ì´ìƒì…ë‹ˆë‹¤.';

    resultDiv.innerHTML = `
      <div class="dururi-check">
        <h3>âŒ ì§€ì› ëŒ€ìƒì´ ì•„ë‹™ë‹ˆë‹¤</h3>
        <p>${reason}</p>
      </div>
    `;
  }
}

// Init
loadRates();
</script>

</body>
</html>
